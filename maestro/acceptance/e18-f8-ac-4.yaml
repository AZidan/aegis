# E18-F8 AC-4: Pending tab shows status badge, risk score, Review action button
#
# The Pending tab table renders:
# - A "Status" column with colored badges (In Review, Pending, Changes Requested)
# - A "Risk" column with a numeric risk score
# - An "Action" column with a "Review" button that navigates to the review detail page
#
# DB has 14 in_review skills on the Pending tab.
# Note: The action column is beyond the visible viewport width in Maestro's browser.
# We verify Status + Risk columns are present and confirm the review navigation works
# by tapping a skill row (the button navigates to /admin/skills/review/:id).

url: http://localhost:3001/admin/login
---
- runFlow: helpers/admin-login.yaml
- openLink: http://localhost:3001/admin/skills
- extendedWaitUntil:
    visible: "Skill Management"
    timeout: 15000
- waitForAnimationToEnd

# Wait for Pending tab data to load
- extendedWaitUntil:
    visible: "pdf"
    timeout: 15000

# Status badge column is visible (pending-specific) - confirms status badge rendering
- assertVisible: "Status"

# Risk column is visible (pending-specific requirement)
- assertVisible: "Risk"

# "In Review" badge confirms status badges are rendering on pending skills
- assertVisible: "In Review"

- takeScreenshot: "e18-f8-ac-4-pending-status-risk-badges-visible"

# Verify the Review action button works by navigating directly to a pending skill detail
# (pdf skill id: dd9880f9-ac16-4377-bca7-76dccc8ef25d is in_review)
- openLink: http://localhost:3001/admin/skills/review/dd9880f9-ac16-4377-bca7-76dccc8ef25d
- extendedWaitUntil:
    visible: "pdf"
    timeout: 15000
- waitForAnimationToEnd

# On the pending/in_review detail page, action bar IS visible (not read-only)
# This confirms the "Review" button navigation path leads to the actionable review page
- assertVisible: "Approve & Publish"
- takeScreenshot: "e18-f8-ac-4-review-button-leads-to-action-page"
