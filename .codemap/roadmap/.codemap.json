{
  "directory": "roadmap",
  "files": {
    "architecture.md": {
      "hash": "39f846040a10",
      "indexed_at": "2026-02-05T21:07:47.496764+00:00",
      "language": "markdown",
      "lines": 203,
      "symbols": [
        {
          "docstring": "Designing a multi-tenant AI agent platform. Key concern: preventing agents from accessing other agents' files/credentials (triggered by Nadia accessin",
          "lines": [
            9,
            14
          ],
          "name": "Context",
          "type": "section"
        },
        {
          "children": [
            {
              "docstring": "**OpenClaw-per-Company** \u2014 Each company gets its own isolated OpenClaw container/instance.",
              "lines": [
                17,
                19
              ],
              "name": "Decision",
              "type": "subsection"
            },
            {
              "lines": [
                20,
                34
              ],
              "name": "Architecture",
              "type": "subsection"
            },
            {
              "docstring": "- **Hard isolation between companies** \u2014 non-negotiable for enterprise - **Soft isolation within company** \u2014 agents in same org, acceptable risk - Sta",
              "lines": [
                35,
                39
              ],
              "name": "Rationale",
              "type": "subsection"
            },
            {
              "docstring": "| Option | Verdict | |--------|---------| | Shared OpenClaw, namespace isolation | Rejected \u2014 one bug = catastrophic breach | | Container per agent |",
              "lines": [
                40,
                47
              ],
              "name": "Alternatives Considered",
              "type": "subsection"
            }
          ],
          "lines": [
            15,
            47
          ],
          "name": "Decision 1: Multi-Tenant Isolation Model",
          "type": "section"
        },
        {
          "children": [
            {
              "docstring": "**Hard filesystem isolation + messaging-only communication via allowlists**",
              "lines": [
                50,
                52
              ],
              "name": "Decision",
              "type": "subsection"
            },
            {
              "docstring": "- Each agent owns their files **completely** - **No cross-agent file access** \u2014 ever - Agents can have internal policies (e.g., \"don't share WIP work\"",
              "lines": [
                53,
                57
              ],
              "name": "Filesystem",
              "type": "subsection"
            },
            {
              "docstring": "- **Messaging only** via `sessions_send` - **Default: deny all** - Main agent \u2194 all subagents: **always allowed** - Subagent \u2194 subagent: **explicit al",
              "lines": [
                58,
                63
              ],
              "name": "Communication",
              "type": "subsection"
            },
            {
              "lines": [
                64,
                82
              ],
              "name": "Visualization",
              "type": "subsection"
            },
            {
              "docstring": "- Zero-trust by default - Clear hierarchy \u2014 main agent is coordinator - Audit-friendly \u2014 all paths explicit - Prevents lateral movement if one agent c",
              "lines": [
                83,
                90
              ],
              "name": "Rationale",
              "type": "subsection"
            }
          ],
          "lines": [
            48,
            90
          ],
          "name": "Decision 2: Intra-Company Agent Isolation",
          "type": "section"
        },
        {
          "children": [
            {
              "docstring": "| Who | Can Configure | |-----|---------------| | Main agent | Subagent \u2194 subagent links (when instructed by human) | | Company admin | Role-based rul",
              "lines": [
                93,
                98
              ],
              "name": "Decision",
              "type": "subsection"
            },
            {
              "docstring": "- Flexibility for different org structures - Main agent can self-manage within bounds - Admin has override authority",
              "lines": [
                99,
                105
              ],
              "name": "Rationale",
              "type": "subsection"
            }
          ],
          "lines": [
            91,
            105
          ],
          "name": "Decision 3: Allowlist Management",
          "type": "section"
        },
        {
          "children": [
            {
              "docstring": "Three patterns supported:",
              "lines": [
                108,
                116
              ],
              "name": "Decision",
              "type": "subsection"
            },
            {
              "docstring": "**Per-agent credentials** \u2014 simpler, auditable. Add shared credentials as optional tier for read-only resources (BI, knowledge bases).",
              "lines": [
                117,
                121
              ],
              "name": "Default",
              "type": "subsection"
            }
          ],
          "lines": [
            106,
            121
          ],
          "name": "Decision 4: Shared Resources",
          "type": "section"
        },
        {
          "children": [
            {
              "docstring": "**Hybrid model (Option C)**: Core skills shared + company custom skills as overlay",
              "lines": [
                124,
                126
              ],
              "name": "Decision",
              "type": "subsection"
            },
            {
              "lines": [
                127,
                141
              ],
              "name": "Layers",
              "type": "subsection"
            },
            {
              "docstring": "- **Per-agent** by default - **Per-company** optional for shared read-only resources",
              "lines": [
                142,
                147
              ],
              "name": "Credentials",
              "type": "subsection"
            }
          ],
          "lines": [
            122,
            147
          ],
          "name": "Decision 5: Skills & Tools Architecture",
          "type": "section"
        },
        {
          "children": [
            {
              "docstring": "**Verified skill marketplace + phased sandboxing**",
              "lines": [
                150,
                152
              ],
              "name": "Decision",
              "type": "subsection"
            },
            {
              "docstring": "| Actor | Permissions | |-------|-------------| | Platform team | Maintains verified skill registry, reviews code | | Company admin | Installs from re",
              "lines": [
                153,
                159
              ],
              "name": "Governance Model",
              "type": "subsection"
            },
            {
              "docstring": "**Phase 1 (MVP):** - Verified marketplace only - Code review before publish - No runtime sandboxing",
              "lines": [
                160,
                176
              ],
              "name": "Sandboxing Roadmap",
              "type": "subsection"
            },
            {
              "lines": [
                177,
                187
              ],
              "name": "Permission Manifest Example (Phase 2+)",
              "type": "subsection"
            }
          ],
          "lines": [
            148,
            187
          ],
          "name": "Decision 6: Skill Governance & Security",
          "type": "section"
        },
        {
          "docstring": "| Item | Status | Notes | |------|--------|-------| | Control plane architecture | Not started | Admin dashboard, provisioning API | | Pricing model |",
          "lines": [
            188,
            198
          ],
          "name": "Open Items",
          "type": "section"
        },
        {
          "docstring": "- [Multi-Agent Technical Plan](../docs/multi-agent-plan.md) \u2014 Original detailed architecture - [Skill Governance Doc](~/.openclaw/docs/skill-governanc",
          "lines": [
            199,
            204
          ],
          "name": "References",
          "type": "section"
        }
      ]
    }
  },
  "generated_at": "2026-02-06T11:35:32.331887+00:00",
  "version": "1.0"
}