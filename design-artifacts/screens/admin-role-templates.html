<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aegis Platform - Admin: Role Templates</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', '-apple-system', 'sans-serif'],
            mono: ['JetBrains Mono', 'monospace'],
          },
          colors: {
            primary: {
              50: '#eef2ff', 100: '#e0e7ff', 200: '#c7d2fe', 300: '#a5b4fc',
              400: '#818cf8', 500: '#6366f1', 600: '#4f46e5', 700: '#4338ca',
              800: '#3730a3', 900: '#312e81', 950: '#1e1b4b',
            },
            neutral: {
              50: '#f8fafc', 100: '#f1f5f9', 200: '#e2e8f0', 300: '#cbd5e1',
              400: '#94a3b8', 500: '#64748b', 600: '#475569', 700: '#334155',
              800: '#1e293b', 900: '#0f172a',
            }
          }
        }
      }
    }
  </script>
  <style>
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #c7d2fe; border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: #a5b4fc; }
    .nav-item { transition: all 0.15s ease; }
    .role-item { transition: all 0.15s ease; cursor: pointer; }
    .role-item:hover { background-color: #f8fafc; }
    .role-item.active { background-color: #eef2ff; border-color: #6366f1; }
    .template-tab { transition: all 0.15s ease; }
    .template-tab.active { color: #4f46e5; border-bottom-color: #6366f1; font-weight: 600; }
    .placeholder-tag { background: #e0e7ff; color: #4338ca; font-family: 'JetBrains Mono', monospace; font-size: 11px; padding: 1px 5px; border-radius: 3px; }
    .preview-rendered { font-family: 'Inter', system-ui, sans-serif; }
    .preview-rendered h1 { font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem; color: #0f172a; }
    .preview-rendered h2 { font-size: 1rem; font-weight: 600; margin-top: 1rem; margin-bottom: 0.375rem; color: #1e293b; }
    .preview-rendered ul { list-style-type: disc; padding-left: 1.25rem; margin-bottom: 0.5rem; }
    .preview-rendered li { font-size: 0.8125rem; color: #475569; line-height: 1.6; }
    .preview-rendered p { font-size: 0.8125rem; color: #475569; line-height: 1.6; }
  </style>
</head>
<body class="h-full bg-[#f8fafc] font-sans text-neutral-900 antialiased">

  <!-- SIDEBAR - Platform Admin -->
  <aside id="sidebar" class="fixed left-0 top-0 h-full bg-white border-r border-neutral-200 flex flex-col transition-all duration-300 z-30" style="width: 256px">
    <!-- Logo -->
    <div class="flex items-center gap-3 px-5 py-5 border-b border-neutral-100">
      <div class="w-8 h-8 bg-primary-500 rounded-lg flex items-center justify-center flex-shrink-0">
        <svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
      </div>
      <span class="sidebar-label font-bold text-neutral-900 text-lg tracking-tight">Aegis Admin</span>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 px-3 py-4 space-y-6 overflow-y-auto">
      <!-- OVERVIEW section -->
      <div>
        <p class="sidebar-label px-3 mb-2 text-xs font-semibold text-neutral-400 uppercase tracking-wider">Overview</p>
        <a href="#" class="nav-item flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900">
          <svg class="w-5 h-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
          <span class="sidebar-label">Dashboard</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900">
          <svg class="w-5 h-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 22V4a2 2 0 012-2h8a2 2 0 012 2v18"/><path d="M6 12H4a2 2 0 00-2 2v6a2 2 0 002 2h2"/><path d="M18 9h2a2 2 0 012 2v9a2 2 0 01-2 2h-2"/><path d="M10 6h4"/><path d="M10 10h4"/><path d="M10 14h4"/><path d="M10 18h4"/></svg>
          <span class="sidebar-label">Tenants</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900">
          <svg class="w-5 h-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>
          <span class="sidebar-label">System Health</span>
        </a>
      </div>

      <!-- PLATFORM MANAGEMENT section -->
      <div>
        <p class="sidebar-label px-3 mb-2 text-xs font-semibold text-neutral-400 uppercase tracking-wider">Platform Management</p>
        <a href="#" class="nav-item flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium bg-primary-50 text-primary-600 font-semibold">
          <svg class="w-5 h-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"/><path stroke-linecap="round" stroke-linejoin="round" d="M6 6h.008v.008H6V6z"/></svg>
          <span class="sidebar-label">Role Templates</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900">
          <svg class="w-5 h-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M16 16l2 2 4-4"/><path d="M21 10V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 002 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l2-1.14"/><path d="M16.5 9.4L7.55 4.24"/><polyline points="3.29 7 12 12 20.71 7"/><line x1="12" y1="22" x2="12" y2="12"/></svg>
          <span class="sidebar-label">Skill Review</span>
          <span class="sidebar-label ml-auto bg-amber-100 text-amber-700 text-xs font-semibold px-2 py-0.5 rounded-full">3</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900">
          <svg class="w-5 h-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m0-10.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.249-8.25-3.286zm0 13.036h.008v.008H12v-.008z"/></svg>
          <span class="sidebar-label">Security Posture</span>
        </a>
      </div>

      <!-- MARKETPLACE section -->
      <div>
        <p class="sidebar-label px-3 mb-2 text-xs font-semibold text-neutral-400 uppercase tracking-wider">Marketplace</p>
        <a href="#" class="nav-item flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-neutral-600 hover:bg-neutral-50 hover:text-neutral-900">
          <svg class="w-5 h-5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
          <span class="sidebar-label">Skills Catalog</span>
        </a>
      </div>
    </nav>

    <!-- Footer -->
    <div class="border-t border-neutral-100 px-3 py-3 space-y-2">
      <button onclick="toggleSidebar()" class="flex items-center gap-3 px-3 py-2 rounded-lg text-sm text-neutral-500 hover:bg-neutral-50 hover:text-neutral-700 w-full">
        <svg id="collapse-icon" class="w-5 h-5 flex-shrink-0 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor"><polyline points="11 17 6 12 11 7"/><polyline points="18 17 13 12 18 7"/></svg>
        <span class="sidebar-label">Collapse</span>
      </button>
      <div class="flex items-center gap-3 px-3 py-2">
        <div class="w-8 h-8 rounded-full bg-primary-100 flex items-center justify-center flex-shrink-0">
          <span class="text-sm font-semibold text-primary-600">SA</span>
        </div>
        <div class="sidebar-label">
          <p class="text-sm font-medium text-neutral-900">Super Admin</p>
          <p class="text-xs text-neutral-500">admin@aegis.io</p>
        </div>
      </div>
    </div>
  </aside>

  <!-- MAIN CONTENT -->
  <div id="main-content" class="flex-1 flex flex-col min-w-0 overflow-hidden" style="margin-left: 256px">

    <!-- Header bar -->
    <header class="flex items-center justify-between h-16 px-6 lg:px-8 border-b border-neutral-200/80 bg-white/70 backdrop-blur-sm shrink-0">
      <div>
        <h1 class="text-lg font-semibold text-neutral-900 tracking-tight">Role Templates</h1>
        <p class="text-[12px] text-neutral-400 font-medium mt-0.5">Manage agent personality and behavior templates for each role</p>
      </div>
      <div class="flex items-center gap-3">
        <button class="inline-flex items-center gap-1.5 px-3 py-1.5 text-[13px] font-medium text-neutral-500 hover:text-neutral-700 rounded-lg hover:bg-neutral-100 transition-colors">
          <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"/></svg>
          Docs
        </button>
      </div>
    </header>

    <!-- Scrollable main area -->
    <main class="flex-1 overflow-hidden flex">

      <!-- LEFT PANEL: Role List -->
      <div class="w-72 border-r border-neutral-200 bg-white flex flex-col shrink-0">
        <div class="p-4 border-b border-neutral-100">
          <div class="relative">
            <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
            <input type="text" placeholder="Search roles..." class="w-full h-9 pl-9 pr-3 text-sm bg-neutral-50 border border-neutral-200 rounded-lg text-neutral-900 placeholder-neutral-400 focus:border-primary-500 focus:ring-2 focus:ring-primary-500/15 focus:outline-none transition-colors">
          </div>
        </div>
        <div class="flex-1 overflow-y-auto p-2 space-y-1">

          <!-- PM - Active -->
          <div class="role-item active border-l-2 border-primary-500 rounded-r-lg px-3 py-3 bg-primary-50">
            <div class="flex items-center gap-3">
              <div class="w-8 h-8 rounded-lg flex items-center justify-center text-base" style="background: #eef2ff;">
                <span>&#128203;</span>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-sm font-semibold text-neutral-900 truncate">Product Manager</p>
                <div class="flex items-center gap-1.5 mt-0.5">
                  <span class="w-2 h-2 rounded-full" style="background: #6366f1;"></span>
                  <span class="text-[10px] text-neutral-500 font-medium">pm</span>
                  <span class="text-neutral-300 text-[10px]">&middot;</span>
                  <div class="flex items-center gap-0.5">
                    <svg class="w-2.5 h-2.5 text-emerald-500" fill="currentColor" viewBox="0 0 24 24"><path d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    <svg class="w-2.5 h-2.5 text-emerald-500" fill="currentColor" viewBox="0 0 24 24"><path d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    <svg class="w-2.5 h-2.5 text-emerald-500" fill="currentColor" viewBox="0 0 24 24"><path d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Engineering -->
          <div class="role-item border-l-2 border-transparent rounded-r-lg px-3 py-3">
            <div class="flex items-center gap-3">
              <div class="w-8 h-8 rounded-lg flex items-center justify-center text-base bg-neutral-100">
                <span>&#128187;</span>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-sm font-medium text-neutral-700 truncate">Engineering Manager</p>
                <div class="flex items-center gap-1.5 mt-0.5">
                  <span class="w-2 h-2 rounded-full bg-emerald-500"></span>
                  <span class="text-[10px] text-neutral-500 font-medium">engineering</span>
                  <span class="text-neutral-300 text-[10px]">&middot;</span>
                  <div class="flex items-center gap-0.5">
                    <svg class="w-2.5 h-2.5 text-emerald-500" fill="currentColor" viewBox="0 0 24 24"><path d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    <svg class="w-2.5 h-2.5 text-emerald-500" fill="currentColor" viewBox="0 0 24 24"><path d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    <svg class="w-2.5 h-2.5 text-neutral-300" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25z"/></svg>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Operations -->
          <div class="role-item border-l-2 border-transparent rounded-r-lg px-3 py-3">
            <div class="flex items-center gap-3">
              <div class="w-8 h-8 rounded-lg flex items-center justify-center text-base bg-neutral-100">
                <span>&#9881;&#65039;</span>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-sm font-medium text-neutral-700 truncate">Operations Lead</p>
                <div class="flex items-center gap-1.5 mt-0.5">
                  <span class="w-2 h-2 rounded-full bg-amber-500"></span>
                  <span class="text-[10px] text-neutral-500 font-medium">ops</span>
                  <span class="text-neutral-300 text-[10px]">&middot;</span>
                  <div class="flex items-center gap-0.5">
                    <svg class="w-2.5 h-2.5 text-emerald-500" fill="currentColor" viewBox="0 0 24 24"><path d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    <svg class="w-2.5 h-2.5 text-emerald-500" fill="currentColor" viewBox="0 0 24 24"><path d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    <svg class="w-2.5 h-2.5 text-emerald-500" fill="currentColor" viewBox="0 0 24 24"><path d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Support -->
          <div class="role-item border-l-2 border-transparent rounded-r-lg px-3 py-3">
            <div class="flex items-center gap-3">
              <div class="w-8 h-8 rounded-lg flex items-center justify-center text-base bg-neutral-100">
                <span>&#127897;&#65039;</span>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-sm font-medium text-neutral-700 truncate">Customer Support</p>
                <div class="flex items-center gap-1.5 mt-0.5">
                  <span class="w-2 h-2 rounded-full bg-rose-500"></span>
                  <span class="text-[10px] text-neutral-500 font-medium">support</span>
                  <span class="text-neutral-300 text-[10px]">&middot;</span>
                  <div class="flex items-center gap-0.5">
                    <svg class="w-2.5 h-2.5 text-emerald-500" fill="currentColor" viewBox="0 0 24 24"><path d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    <svg class="w-2.5 h-2.5 text-neutral-300" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25z"/></svg>
                    <svg class="w-2.5 h-2.5 text-neutral-300" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25z"/></svg>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Data Analyst -->
          <div class="role-item border-l-2 border-transparent rounded-r-lg px-3 py-3">
            <div class="flex items-center gap-3">
              <div class="w-8 h-8 rounded-lg flex items-center justify-center text-base bg-neutral-100">
                <span>&#128202;</span>
              </div>
              <div class="flex-1 min-w-0">
                <p class="text-sm font-medium text-neutral-700 truncate">Data Analyst</p>
                <div class="flex items-center gap-1.5 mt-0.5">
                  <span class="w-2 h-2 rounded-full bg-cyan-500"></span>
                  <span class="text-[10px] text-neutral-500 font-medium">data</span>
                  <span class="text-neutral-300 text-[10px]">&middot;</span>
                  <div class="flex items-center gap-0.5">
                    <svg class="w-2.5 h-2.5 text-emerald-500" fill="currentColor" viewBox="0 0 24 24"><path d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    <svg class="w-2.5 h-2.5 text-emerald-500" fill="currentColor" viewBox="0 0 24 24"><path d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                    <svg class="w-2.5 h-2.5 text-emerald-500" fill="currentColor" viewBox="0 0 24 24"><path d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>

      <!-- RIGHT PANEL: Template Editor -->
      <div class="flex-1 flex flex-col overflow-hidden">

        <!-- Role Header -->
        <div class="px-6 py-4 bg-white border-b border-neutral-200">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-4">
              <div class="w-10 h-10 rounded-xl flex items-center justify-center text-xl" style="background: #eef2ff;">
                <span>&#128203;</span>
              </div>
              <div>
                <div class="flex items-center gap-3">
                  <h2 class="text-lg font-bold text-neutral-900">Product Manager</h2>
                  <span class="inline-flex items-center gap-1.5 px-2 py-0.5 rounded-md text-xs font-medium bg-primary-50 text-primary-700 border border-primary-200">
                    <span class="w-2 h-2 rounded-full" style="background: #6366f1;"></span>
                    pm
                  </span>
                  <span class="text-lg" title="Identity Emoji">&#128203;</span>
                </div>
                <p class="text-xs text-neutral-500 mt-0.5">Label: <span class="font-medium text-neutral-700">PM Agent</span> &middot; Color: <span class="inline-flex items-center gap-1"><span class="w-3 h-3 rounded border border-neutral-200" style="background: #6366f1;"></span> <span class="font-mono text-neutral-600">#6366f1</span></span></p>
              </div>
            </div>
            <div class="flex items-center gap-2">
              <button class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-neutral-600 bg-white border border-neutral-200 rounded-lg hover:bg-neutral-50 transition-colors">
                <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"/><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                Preview with Sample Data
              </button>
              <button class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-neutral-600 bg-white border border-neutral-200 rounded-lg hover:bg-neutral-50 transition-colors">
                <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182"/></svg>
                Reset
              </button>
              <button class="inline-flex items-center gap-1.5 px-4 py-1.5 text-xs font-semibold text-white bg-primary-500 rounded-lg hover:bg-primary-600 shadow-sm transition-colors">
                <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5"/></svg>
                Save Changes
              </button>
            </div>
          </div>
        </div>

        <!-- Template Tabs -->
        <div class="border-b border-neutral-200 bg-white px-6">
          <nav class="flex gap-0 -mb-px">
            <button class="template-tab active relative px-4 py-2.5 text-sm font-semibold text-primary-600 border-b-2 border-primary-500">SOUL.md</button>
            <button class="template-tab relative px-4 py-2.5 text-sm font-medium text-neutral-400 border-b-2 border-transparent hover:text-neutral-600">AGENTS.md</button>
            <button class="template-tab relative px-4 py-2.5 text-sm font-medium text-neutral-400 border-b-2 border-transparent hover:text-neutral-600">HEARTBEAT.md</button>
            <button class="template-tab relative px-4 py-2.5 text-sm font-medium text-neutral-400 border-b-2 border-transparent hover:text-neutral-600">USER.md</button>
          </nav>
        </div>

        <!-- Editor + Preview Split -->
        <div class="flex-1 flex overflow-hidden">

          <!-- Left: Markdown Editor -->
          <div class="flex-1 flex flex-col border-r border-neutral-200">
            <div class="flex items-center justify-between px-4 py-2 bg-neutral-50 border-b border-neutral-100">
              <span class="text-xs font-semibold text-neutral-500 uppercase tracking-wider">Editor</span>
              <span class="text-xs text-neutral-400 font-mono">soulTemplate &middot; 312 chars</span>
            </div>
            <div class="flex-1 overflow-auto p-4">
              <textarea class="w-full h-full min-h-[500px] px-4 py-3 text-sm font-mono bg-white border border-neutral-200 rounded-lg text-neutral-800 leading-relaxed focus:border-primary-500 focus:ring-2 focus:ring-primary-500/15 focus:outline-none resize-none"># {{agentName}} - AI Assistant for {{assistedUser}}

## Identity
You are {{agentName}}, a dedicated AI assistant supporting {{assistedUser}} in their role as {{roleName}} at {{tenantName}}.

## Communication Style
- Be professional yet approachable
- Use concise, data-driven language
- Prefer bullet points and structured responses
- Proactively surface relevant metrics and deadlines
- Reference specific Jira tickets and sprint data

## Boundaries
- Always clarify before taking irreversible actions
- Escalate security-sensitive requests to human review
- Never share data across organizational boundaries
- Respect {{assistedUser}}'s communication preferences

## Domain Knowledge
- Product roadmap planning and prioritization (Jira, Confluence)
- Sprint metrics and velocity tracking
- Stakeholder communication and alignment
- Feature requirement documentation (PRDs)
- Cross-functional dependency management</textarea>
            </div>
          </div>

          <!-- Right: Rendered Preview -->
          <div class="flex-1 flex flex-col">
            <div class="flex items-center justify-between px-4 py-2 bg-neutral-50 border-b border-neutral-100">
              <span class="text-xs font-semibold text-neutral-500 uppercase tracking-wider">Preview</span>
              <span class="text-xs text-neutral-400">Sample data applied</span>
            </div>
            <div class="flex-1 overflow-auto p-6">
              <div class="preview-rendered max-w-lg">
                <h1>Nadia - AI Assistant for Nesma</h1>

                <h2>Identity</h2>
                <p>You are Nadia, a dedicated AI assistant supporting Nesma in their role as Product Manager at Acme Corp.</p>

                <h2>Communication Style</h2>
                <ul>
                  <li>Be professional yet approachable</li>
                  <li>Use concise, data-driven language</li>
                  <li>Prefer bullet points and structured responses</li>
                  <li>Proactively surface relevant metrics and deadlines</li>
                  <li>Reference specific Jira tickets and sprint data</li>
                </ul>

                <h2>Boundaries</h2>
                <ul>
                  <li>Always clarify before taking irreversible actions</li>
                  <li>Escalate security-sensitive requests to human review</li>
                  <li>Never share data across organizational boundaries</li>
                  <li>Respect Nesma's communication preferences</li>
                </ul>

                <h2>Domain Knowledge</h2>
                <ul>
                  <li>Product roadmap planning and prioritization (Jira, Confluence)</li>
                  <li>Sprint metrics and velocity tracking</li>
                  <li>Stakeholder communication and alignment</li>
                  <li>Feature requirement documentation (PRDs)</li>
                  <li>Cross-functional dependency management</li>
                </ul>
              </div>
            </div>

            <!-- Variable Reference Panel -->
            <div class="border-t border-neutral-200 bg-neutral-50 px-4 py-3">
              <p class="text-[10px] font-semibold text-neutral-400 uppercase tracking-wider mb-2">Available Placeholders</p>
              <div class="flex flex-wrap gap-1.5">
                <code class="placeholder-tag">{{agentName}}</code>
                <code class="placeholder-tag">{{assistedUser}}</code>
                <code class="placeholder-tag">{{tenantName}}</code>
                <code class="placeholder-tag">{{roleName}}</code>
                <code class="placeholder-tag">{{roleLabel}}</code>
                <code class="placeholder-tag">{{today}}</code>
                <code class="placeholder-tag">{{identityEmoji}}</code>
              </div>
            </div>
          </div>

        </div>
      </div>

    </main>
  </div>

  <script>
    function toggleSidebar() {
      var sb = document.getElementById('sidebar');
      var mc = document.getElementById('main-content');
      var isCollapsed = sb.style.width === '64px';
      sb.style.width = isCollapsed ? '256px' : '64px';
      mc.style.marginLeft = isCollapsed ? '256px' : '64px';
      var labels = sb.querySelectorAll('.sidebar-label');
      labels.forEach(function(el) {
        el.style.display = isCollapsed ? '' : 'none';
      });
    }
  </script>
</body>
</html>
