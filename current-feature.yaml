# Current Feature Tracker
# Tracks active development scope and requirements per CLAUDE.md

feature:
  name: "Tenant Registration & Management API"
  epic: "E1-F1"
  sprint: "Sprint 1 - Backend Foundation"
  priority: P0
  started_at: "2026-02-07"
  status: in_progress
  branch: tenant-management

# Feature scope from API contract v1.2.0 Section 3
endpoints:
  - path: "GET /api/admin/tenants"
    status: in_progress
    agent: api-engineer
    description: "Paginated list of all tenants with filtering"

  - path: "POST /api/admin/tenants"
    status: in_progress
    agent: api-engineer
    description: "Provision new tenant (async operation)"

  - path: "GET /api/admin/tenants/:id"
    status: in_progress
    agent: api-engineer
    description: "Detailed tenant information including container health"

  - path: "PATCH /api/admin/tenants/:id"
    status: in_progress
    agent: api-engineer
    description: "Update tenant configuration (plan, limits, model defaults)"

  - path: "DELETE /api/admin/tenants/:id"
    status: in_progress
    agent: api-engineer
    description: "Decommission tenant (soft delete with 7-day grace period)"

  - path: "POST /api/admin/tenants/:id/actions/restart"
    status: in_progress
    agent: api-engineer
    description: "Restart tenant's OpenClaw container"

  - path: "GET /api/admin/tenants/:id/health"
    status: in_progress
    agent: api-engineer
    description: "Container health metrics (current + 24h history)"

  - path: "GET /api/admin/tenants/:id/agents"
    status: in_progress
    agent: api-engineer
    description: "List all agents within a tenant"

# Tasks
tasks:
  - name: "Backend Tenant CRUD + Operations API"
    branch: "tenants/backend-crud"
    status: in_progress
    agent: api-engineer
    subtasks:
      - "1.1 DTOs & validation schemas"
      - "1.2 TenantsService (CRUD + business logic)"
      - "1.3 TenantsController (all 8 endpoints)"
      - "1.4 TenantsModule registration"

  - name: "Tests"
    branch: "tenants/tests"
    status: in_progress
    agent: qa-engineer
    subtasks:
      - "2.1 Unit tests for TenantsService"
      - "2.2 Unit tests for TenantsController"

# Agents actively working
active_agents:
  - name: api-engineer
    task: "Implement all 8 tenant endpoints"
    source_of_truth: "docs/api-contract.md Section 3"

  - name: qa-engineer
    task: "Write tenant unit tests"
    source_of_truth: "docs/api-contract.md Section 3"

# Acceptance criteria
acceptance_criteria:
  - "All 8 endpoints match docs/api-contract.md v1.2.0 Section 3 exactly"
  - "JWT auth guard on all endpoints (platform_admin only)"
  - "Zod validation on all request bodies"
  - "Proper error responses (400, 401, 403, 404, 409)"
  - "Pagination, filtering, sorting on list endpoint"
  - "Soft delete with grace period on delete endpoint"
  - "npm run build passes"
  - "All tests pass"
